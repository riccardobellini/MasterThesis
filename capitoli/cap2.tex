\chapter{Stato dell'arte}
\label{chap:SOA}
\vspace{1cm}
In questo capitolo verrà fornito un esame dello stato dell'arte e verranno presentate 
alcune soluzioni relative al lavoro oggetto di questa tesi.

Nella Sezione \ref{sec:progettoFASTER} è descritto il progetto europeo 
\acs{FASTER} con una spiegazione sulla metodologia proposta per la toolchain e 
l'algoritmo che effettua l'analisi esplorativa delle soluzioni, che interagisce 
con lo scheduler.

Nella Sezione \ref{sec:algoritmiProposti} si esaminano i vari approcci proposti 
dagli autori nell'ambito del problema dello scheduling dei task su dispositivi 
riconfigurabili, divisi in algoritmi esatti, trattati nella Sezione 
\ref{sec:algoritmiEsatti}, ed euristici, trattati nella Sezione 
\ref{sec:algoritmiEuristici}.


\section[Il progetto \acs{FASTER}]{Il progetto \acs{FASTER}}
\label{sec:progettoFASTER}
In questa sezione vengono presentate il fondamento logico e le motivazioni alla 
base del progetto \acs{FASTER}. La Sezione \ref{sec:fasterIntro} fornisce 
un'introduzione al progetto e spiega gli obiettivi e le motivazioni alla 
base che hanno portato alla creazione del progetto; infine, la Sezione 
\ref{sec:fasterMetodologia} illustra la metodologia tramite la quale si possono 
raggiungere gli obiettivi prefissati.


%%% acro definitions
\acrodef{NIDS}{Network Intrusion Detection System}
\acrodef{RTM}{Reverse Time Migration}
\acrodef{TCO}{Total Cost of Ownership}
\acrodef{ICS}{Institute of Computer Science}
\acrodef{FORTH}{Foundation for Research and Technology - Hellas}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subsection{Introduzione}
\label{sec:fasterIntro}
\acs{FASTER} è l'acronimo di \emph{\acl{FASTER}}, un progetto\footnote{Sito del 
progetto: \url{http://www.fp7-faster.eu/}.} organizzato dalla comunità europea 
che coinvolge diverse aziende e atenei\footnote{I collaboratori del progetto 
sono: l'\ac{ICS} di \ac{FORTH} in Grecia, Chalmers University of Technology in 
Svezia, l'università di Ghent in Belgio, l'Imperial College di Londra, il 
Politecnico di Milano e le aziende Maxeler, ST Microelectronics e Synelixis.}, 
tra cui il Politecnico di Milano. Il progetto è stato avviato il 1 settembre 
2011, ha una durata di 36 mesi ed è supportato tramite fondi stanziati dalla 
comunità europea.

\subsubsection{Motivazioni e obiettivi del progetto}
L'ambito di applicazione del progetto \ac{FASTER} sono le architetture 
riconfigurabili; in particolare, \ac{FASTER} è pensato, come il nome 
suggerisce, per facilitare la definizione e l'uso di sistemi implementati in 
hardware \cite{FasterPaper}.

Sfruttando le potenzialità delle promettenti architetture hardware basate sulla 
logica riconfigurabile, introdotte nel Capitolo \ref{chap:intro}, si possono 
infatti estendere le funzionalità (e quindi la durata della vita) di 
un'applicazione senza dover riprogettare interamente l'hardware necessario per 
eseguirla, consentendo allo stesso tempo di raggiungere performance equiparabili 
a quelle di un'esecuzione su hardware dedicato.

% FIXME spostare nell'introduzione?
Si pensi, a titolo esemplificativo, a un \ac{NIDS}, il cui scopo è eseguire la 
scansione di tutti i pacchetti in ingresso per rilevare possibili minacce, e 
tale scansione deve essere sufficientemente veloce da non costituire un collo 
di bottiglia e rallentare così le comunicazioni. Inoltre, nuove regole devono 
essere aggiunte costantemente, con il crescere della lista delle minacce. In 
risposta a questi requisiti di velocità e dinamicità dell'applicazione, la 
logica riconfigurabile rappresenta una soluzione per il soddisfacimento di 
entrambi i requisiti.

% Extending product functionality and lifetime requires constant addition of new 
% features to satisfy the growing customer needs and the evolving market and 
% technology trends. Software component adaptivity is straightforward but not 
% enough: recent products include hardware accelerators - for reasons of 
% performance and power efficiency - that also need to adapt to new 
% requirements.For example, a Network Intrusion Detection System (NIDS) needs to 
% scan all incoming network packets for suspicious content. The scanning has to be 
% fast so that the monitored communication links are not slowed down, while the 
% list of threats to check for is extended and updated on a daily basis.
% 
% Reconfigurable logic allows the definition of new functions to be implemented in 
% dynamically instantiated hardware units, combining adaptivity with hardware 
% speed and efficiency. For the Intrusion Detection System example, new rules can 
% be hardcoded into the reconfigurable logic, achieving high performance, while 
% providing the necessary adaptivity to new threats.


Nonostante il vantaggio di utilizzare architetture riconfigurabili rispetto 
all'eseguire le applicazioni puramente in software, il design e 
l'implementazione di un sistema basato su logica riconfigurabile hanno delle 
limitazioni rispetto alla più facile estensione delle funzionalità di 
un'applicazione software, per le seguenti ragioni:
\begin{itemize}
 \item il supporto di tool esterni per il design del sistema è ancora 
``elementare'';
 \item le riconfigurazioni hanno un grande impatto in termini di overhead sul 
tempo di esecuzione dell'applicazione, pertanto devono essere utilizzate con 
attenzione;
 \item la gestione delle risorse disponibili sulla scheda (anche a run-time) è 
interamente affidata all'utente.
\end{itemize}
Oltre a queste limitazioni, il designer ha altri compiti da assolvere per 
implementare correttamente un sistema su hardware riconfigurabile, tra cui 
l'identificazione di quali parti del codice devono essere eseguite in hardware 
per avere un effettivo guadagno in termini di velocità di esecuzione, quali 
moduli hardware possono beneficiare di una riconfigurazione, stabilire uno 
schedule e verificare la bontà della soluzione così ottenuta.

Il progetto \ac{FASTER} concentra dunque i propri obiettivi nell'introduzione 
di una nuova metodologia che permetta ai designer di implementare facilmente un 
sistema su una piattaforma target dotata di processori general-purpose e 
acceleratori hardware basati su logica riconfigurabile. Questa metodologia 
consentirà, partendo da un input costituito da una descrizione ad alto livello 
sia dell'applicazione che dell'architettura, di sfruttare al massimo le 
possibilità offerte dalla riconfigurazione parziale dinamica.

\paragraph{Lavori precedenti}
Tra i lavori di ricerca e progetti europei più relativi a \ac{FASTER} si 
annoverano \emph{hArtes} \cite{HArtes}, \emph{Morpheus}, \emph{ACOTES} 
\cite{AcotesUrl, ACOTES}, \emph{Andres} e \emph{Reflect} \cite{Reflect}. % 
% FIXME citazioni mancanti perchè i siti sono offline
Questi lavori hanno obiettivi simili a quelli di \ac{FASTER}, tuttavia si 
concentrano più sugli aspetti architetturali della riconfigurazione; in questi 
lavori non si accenna esplicitamente al design della riconfigurazione parziale 
dinamica, nè si considera quale granularità è meglio utilizzare per la 
riconfigurazione: \emph{region-based}\footnote{Nella riconfigurazione di tipo 
region-based, sono riconfigurati interi moduli che occupano arbitrarie porzioni 
della scheda.} oppure \emph{micro-riconfigurazione}\footnote{Nella 
micro-riconfigurazione vengono identificati dei parametri del modulo che 
sono soggetti a cambiamenti; tali parametri non vengono inclusi nel bitstream, 
lasciando così dei ``buchi''. Quando i valori per tali parametri devono essere 
fissati, è sufficiente lanciare una riconfigurazione con un bitstream di 
dimensioni molto ridotte, che vada a modificare solamente i buchi lasciati in 
precedenza.}.

\paragraph{Contributi di \ac{FASTER}}
\ac{FASTER} si distingue rispetto ai lavori precedentemente sviluppati in 
quanto ha come obiettivo l'introduzione della riconfigurazione parziale 
dinamica come un concetto di design esplicito, fornendo anche i metodi per 
supportare la riconfigurazione a run-time nell'intera metodologia di design.
Il progetto \ac{FASTER}, quindi, deve possedere le seguenti caratteristiche:
\begin{enumerate}
 \item deve fornire supporto per l'inclusione della riconfigurazione parziale 
dinamica, sia region-based che micro-riconfigurazione, in maniera trasparente 
all'utente;
 \item deve fornire un framework per il design di un sistema su logica 
riconfigurabile, gestendo l'analisi, la sintesi e la verifica delle soluzioni 
ottenute.
\end{enumerate}

% TODO da scrivere meglio
Gli obiettivi che il progetto \ac{FASTER} si prefigge di raggiungere sono un 
significativo aumento della produttività nel design e nell'implementazione di 
sistemi riconfigurabili, aumento delle performance delle applicazioni 
sviluppate in hardware in presenza di vincoli sul consumo energetico e 
riduzione del costo totale di proprietà\footnote{In inglese \emph{\ac{TCO}}, 
rappresenta l'insieme di tutti i costi da sostenere per l'intero ciclo di 
vita di un sistema o un'apparecchiatura IT.} per sistemi come \ac{NIDS} e 
\ac{RTM} implementati su hardware riconfigurabile, grazie alla minore 
manutenzione richiesta.

Nella prossima sezione verranno illustrate le piattaforme hardware supportate 
da \ac{FASTER} e la metodologia proposta per il framework.


% We expect that the 
% project will lead to a 20% productivity improvement due to seamless 
% implementation and verification of dynamically changing systems, a 50% total 
% ownership cost reduction for NIDS and Reverse Time Migration systems, with a 2x 
% performance improvement under power constraints for Global Illumination and 
% Image Analysis. 


\subsection{Metodologia utilizzata}
\label{sec:fasterMetodologia}

\subsubsection{Piattaforme supportate e applicazioni}
L'obiettivo di \ac{FASTER} è sfruttare le opportunità offerte dalle 
architetture riconfigurabili, sia nel campo dei sistemi \ac{HPC} sia nei 
sistemi embedded. Pertanto, \ac{FASTER} supporta due tipi di piattaforme 
hardware:
\begin{enumerate}
 \item sistemi \ac{HPC} desktop, ad esempio \emph{Maxeler MaxWorkstation};% TODO
 \item sistemi embedded basati su \ac{FPGA}, ad esempio la 
scheda \emph{University Program XUPV5-LX110T} di \emph{Xilinx} o la scheda 
\emph{ZedBoard} di \emph{AVNET}.
\end{enumerate}

Oltre a supportare queste differenti piattaforme, \ac{FASTER} ha come obiettivo 
l'aumento delle performance di tre applicazioni provenienti da diversi ambiti:
\begin{itemize}
 \item \acf{RTM}, un algoritmo applicato nella tomografia sismica per 
fornire una rappresentazione più realistica del sottosuolo in aree 
geologicamente complesse e caratterizzate da differenti velocità di 
propagazione delle onde sismiche;
 \item Global Illumination and Image Analysis, un insieme di algoritmi 
utilizzati per rendere più realistici oggetti e scene rappresentati in grafica 
computerizzata tridimensionale;
 \item sistemi di riconoscimento di intrusione in una rete, descritti in 
precedenza;
\end{itemize}

\subsubsection{Descrizione del framework}
In questa sezione viene descritto il framework e il flusso del progetto ad  
alto livello.

L'approccio adottato da \ac{FASTER} prevede che i vari componenti del framework 
si interfaccino tra loro mediante l'uso di file XML. L'applicazione da 
sintetizzare è scritta in linguaggio C e provvista di annotazioni in formato 
OpenMP\footnote{OpenMP è un formato standard per la specifica di applicazioni 
parallele, che permette di specificare quali funzioni di un'applicazione sono 
parallelizzabili e di suddividere l'applicazione nei vari task.}.

\section{Algoritmi proposti}
\label{sec:algoritmiProposti}


\subsection{Algoritmi esatti}
\label{sec:algoritmiEsatti}


\subsection{Algoritmi euristici}
\label{sec:algoritmiEuristici}


% TODO presentazione delle motivazioni che hanno portato allo sviluppo di un 
% algoritmo iterativo basato su una lista e non esplorativo

% Il flusso di esecuzione della toolchain prevede l'invocazione del tool di 
% scheduling statico come componente esterno da parte dell'algoritmo di 
% esplorazione dello spazio di design del sistema, per la valutazione di una 
% particolare metrica, la stima del tempo di esecuzione totale dello schedule 
% dato un determinato mapping. Poichè la fase di mapping è implementata sotto 
% forma di un  